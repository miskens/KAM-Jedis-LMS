@using System.Linq
@using System.Runtime.Remoting.Channels
@using System.Web.Mvc.Html
@using LexiconLMS.Models
@model LexiconLMS.Models.Group

@{
    ViewBag.Title = "Gruppdetaljer";
    var context = new ApplicationDbContext();
    var groupMembers = context.Users.Where(u => u.GroupId == Model.Id);

    var courses = context.Courses.Where(c => c.GroupId == Model.Id);

    ViewData["GroupId"] = Model.Id;
}

<div class="sg-table-div">
    <table>
        <tr>
            <td class="sg-table-td1">
                <div class="sg-td1-div1">
                    <h1>Grupp: @Html.DisplayFor(model => model.Name)</h1>
                    <h4>@Html.DisplayFor(m => m.StartDate) - @Html.DisplayFor(m => m.EndDate)</h4>
                    <hr />
                    <dl class="dl-horizontal">
                        <dt>
                            @Html.DisplayNameFor(model => model.Name)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.Name)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.Description)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.Description)
                        </dd>
                    </dl>
                </div>
                <p>
                    @Html.ActionLink("Ändra", "Edit", new { id = Model.Id, sender = "g", gId = Model.Id }) |
                    @Html.ActionLink("Till grupper", "Index")
                </p>
                <br /><br />
                <div class="sg-td1-div2">
                    @Html.Partial("_TGroupMembers", groupMembers)
                </div>
            </td>
            <td class="sg-table-td2">
                @Html.Partial("_TGroupCourses", courses, ViewData)
            </td>
        </tr>
    </table>
</div>
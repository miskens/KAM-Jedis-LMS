@using System.IdentityModel.Configuration
@using LexiconLMS.Models
@using Microsoft.AspNet.Identity
@model LexiconLMS.Models.Group

@{
    var context = new ApplicationDbContext();
    var currentUserId = User.Identity.GetUserId();
    
    var currentUser = context.Users.FirstOrDefault(u => u.Id == currentUserId);
    var groupMembers = context.Users.Where(u => u.GroupId == currentUser.GroupId);
    ViewBag.Title = "EIndex";
}

<h1>Grupp: @Html.DisplayFor(model => model.Name)</h1>

<div>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.Description)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Description)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.StartDate)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.StartDate)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.EndDate)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.EndDate)
        </dd>

    </dl>
</div>
<br/><br/>
<div>
    @Html.Partial("_EGroupMembers", groupMembers)
</div>

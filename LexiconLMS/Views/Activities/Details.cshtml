@model LexiconLMS.Models.Activity

@{
    ViewBag.Title = "Details";

    string sender = string.Empty;
    if (Request.RequestContext.RouteData.Values["sender"] != null)
    {
        sender = Request.RequestContext.RouteData.Values["sender"].ToString();
    }

    int groupId= 0;
    if (Request.RequestContext.RouteData.Values["gId"] != null)
    {
        groupId = Int32.Parse(Request.RequestContext.RouteData.Values["gId"].ToString());
    }

    int courseId = 0;
    if (Request.RequestContext.RouteData.Values["cId"] != null)
    {
        courseId = Int32.Parse(Request.RequestContext.RouteData.Values["cId"].ToString());
    }
}

<div>
        <h4>@Model.Name ( @Model.StartDate.ToShortDateString() - @Model.EndDate.ToShortDateString())</h4>
    <hr />
    <dl class="dl-horizontal">

        <dt>
            @Html.DisplayNameFor(model => model.Type)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Type)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Description)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Description)
        </dd>



        <dt>
            @Html.DisplayNameFor(model => model.StartDate)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.StartDate)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.EndDate)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.EndDate)
        </dd>

    </dl>
</div>
<p>
    @if (sender == "c")
    {
        if (User.IsInRole("lärare"))
        {
            @Html.ActionLink("Ändra", "Edit", new { id = Model.Id })
            @Html.Raw("|")
            @Html.ActionLink("Till alla aktiviteter", "Index")
        }
        @Html.ActionLink("Tillbaka", "Details", "Courses", new {id = Model.Id})
    }
    @if (sender == "g")
    {
        if (User.IsInRole("lärare"))
        {
            @Html.ActionLink("Ändra", "Edit", "Activities", new { id = Model.Id, sender, groupId, cId = Model.Id }, null) 
            @Html.ActionLink("Ta bort", "Delete", "Activities", new { id = Model.Id, sender, groupId, courseId }, null)  
        }
            @Html.ActionLink("Tillbaka", "Details", "Courses", new { id = Model.CourseId, sender, groupId }, null)
    }
</p>
